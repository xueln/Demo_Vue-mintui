{"remainingRequest":"D:\\Web1905\\vue2\\vueui\\day01\\vue_app_000\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!D:\\Web1905\\vue2\\vueui\\day01\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Web1905\\vue2\\vueui\\day01\\vue_app_000\\vue_app_00\\src\\components\\xz\\Product.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Web1905\\vue2\\vueui\\day01\\vue_app_000\\vue_app_00\\src\\components\\xz\\Product.vue","mtime":1567157032040},{"path":"D:\\Web1905\\vue2\\vueui\\day01\\vue_app_000\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"D:\\Web1905\\vue2\\vueui\\day01\\vue_app_000\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"D:\\Web1905\\vue2\\vueui\\day01\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:\\\\Web1905\\\\vue2\\\\vueui\\\\day01\\\\vue_app_000\\\\vue_app_00\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      img_baseurl: \"http://127.0.0.1:5050/\",\n      products: [],\n      pno: 0\n    };\n  },\n  methods: {\n    loadMore: function loadMore() {\n      var _this = this;\n\n      this.pno++;\n\n      _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return _this.axios.get(\"product\", {\n                  params: {\n                    pno: _this.pno\n                  }\n                });\n\n              case 2:\n                res = _context.sent;\n                _this.products = _this.products.concat(res.data.data);\n                console.log(_this.products);\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }))();\n    },\n    nextPage: function nextPage() {\n      console.log(\"next\");\n      this.loadMore();\n    },\n    addCart: function addCart(i) {\n      var _this2 = this;\n\n      _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return _this2.axios.get(\"addcart\", {\n                  params: {\n                    lid: _this2.products[i].lid,\n                    lname: _this2.products[i].lname,\n                    price: _this2.products[i].price\n                  }\n                });\n\n              case 2:\n                res = _context2.sent;\n                console.log(res.data);\n\n                if (res.data.code == -1) {\n                  // 通常提供的组件是异步的 需要注意\n                  _this2.$messagebox(\"\", \"请先登录\").then(function (res) {\n                    _this2.$router.push('/Login');\n                  });\n                } else if (res.data.code == -2) {\n                  _this2.$messagebox(\"\", \"添加失败\");\n                } else {\n                  _this2.$toast(res.data.msg);\n                }\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }))();\n    },\n    go_carts: function go_carts() {\n      this.$router.push('/Cart');\n    }\n  },\n  created: function created() {\n    this.loadMore();\n  }\n};",{"version":3,"sources":["Product.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAmBA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,mBAAA,wBADA;AAEA,gBAAA,EAFA;AAGA,WAAA;AAHA,KAAA;AAKA,GAPA;AAQA,WAAA;AACA,YADA,sBACA;AAAA;;AACA,WAAA,GAAA;;AACA;AAAA;AAAA,8BAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,MAAA,KAAA,CAAA,GAAA,CAAA,SAAA,EAAA;AACA,0BAAA;AACA,yBAAA,MAAA;AADA;AADA,iBAAA,CADA;;AAAA;AACA,mBADA;AAMA,sBAAA,QAAA,GAAA,MAAA,QAAA,CAAA,MAAA,CAAA,IAAA,IAAA,CAAA,IAAA,CAAA;AACA,wBAAA,GAAA,CAAA,MAAA,QAAA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;AASA,KAZA;AAaA,YAbA,sBAaA;AACA,cAAA,GAAA,CAAA,MAAA;AACA,WAAA,QAAA;AACA,KAhBA;AAiBA,WAjBA,mBAiBA,CAjBA,EAiBA;AAAA;;AACA;AAAA;AAAA,8BAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,OAAA,KAAA,CAAA,GAAA,CAAA,SAAA,EAAA;AACA,0BAAA;AACA,yBAAA,OAAA,QAAA,CAAA,CAAA,EAAA,GADA;AAEA,2BAAA,OAAA,QAAA,CAAA,CAAA,EAAA,KAFA;AAGA,2BAAA,OAAA,QAAA,CAAA,CAAA,EAAA;AAHA;AADA,iBAAA,CADA;;AAAA;AACA,mBADA;AAQA,wBAAA,GAAA,CAAA,IAAA,IAAA;;AACA,oBAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,CAAA,EAAA;AACA;AACA,yBAAA,WAAA,CAAA,EAAA,EAAA,MAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,2BAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,mBAFA;AAGA,iBALA,MAKA,IAAA,IAAA,IAAA,CAAA,IAAA,IAAA,CAAA,CAAA,EAAA;AACA,yBAAA,WAAA,CAAA,EAAA,EAAA,MAAA;AACA,iBAFA,MAEA;AACA,yBAAA,MAAA,CAAA,IAAA,IAAA,CAAA,GAAA;AACA;;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;AAoBA,KAtCA;AAuCA,YAvCA,sBAuCA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA;AAzCA,GARA;AAmDA,SAnDA,qBAmDA;AACA,SAAA,QAAA;AACA;AArDA,CAAA","sourcesContent":["<template>\r\n  <div class=\"page_pro\">\r\n    <h2>商品列表</h2>\r\n    <div class=\"pros\">\r\n      <div class=\"pros_item\" v-for=\"(item,index) of products\" :key=\"index\">\r\n        <div>\r\n          <img :src=\"img_baseurl+item.img_url\" alt=\"\">\r\n        </div>\r\n        <h4 class=\"ptitle\">{{item.lname}}</h4>\r\n        <p>￥{{item.price.toFixed(2)}}</p>\r\n        <mt-button @click=\"addCart(index)\"  size=\"large\">加入购物车</mt-button>\r\n      </div>\r\n      <mt-button  @click=\"nextPage\" size=\"large\">查看更多</mt-button>\r\n        <mt-button @click=\"go_carts\">查看购物车</mt-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data(){\r\n    return {\r\n      img_baseurl:\"http://127.0.0.1:5050/\",\r\n      products:[],\r\n      pno:0\r\n    }\r\n  },\r\n  methods:{\r\n    loadMore(){\r\n      this.pno++;\r\n      (async ()=>{\r\n        var res=await this.axios.get(\"product\",{\r\n          params:{\r\n            pno:this.pno\r\n          }\r\n      });\r\n        this.products=this.products.concat(res.data.data);\r\n        console.log(this.products);\r\n      })();\r\n    },\r\n    nextPage(){\r\n      console.log(\"next\");\r\n      this.loadMore();\r\n    },\r\n    addCart(i){\r\n      (async ()=>{\r\n        var res=await this.axios.get(\"addcart\",{\r\n          params:{\r\n            lid:this.products[i].lid,\r\n            lname:this.products[i].lname,\r\n            price:this.products[i].price\r\n          }\r\n        });\r\n        console.log(res.data);\r\n        if(res.data.code==-1){\r\n          // 通常提供的组件是异步的 需要注意\r\n          this.$messagebox(\"\",\"请先登录\").then((res)=>{\r\n            this.$router.push('/Login');\r\n          }); \r\n        }else if(res.data.code==-2){\r\n          this.$messagebox(\"\",\"添加失败\");\r\n        }else{\r\n          this.$toast(res.data.msg);\r\n        }\r\n      })();\r\n    },\r\n    go_carts(){\r\n      this.$router.push('/Cart');\r\n    }\r\n  },\r\n  created() {\r\n   this.loadMore();\r\n  },\r\n}\r\n</script>\r\n\r\n<style  scoped>\r\n  .page_pro h2{\r\n    margin:0;\r\n    padding:1rem 0;\r\n    background-color: lightcoral;\r\n    font-weight: normal;\r\n  }\r\n  .pros{\r\n    display:flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    padding:0.6rem 0.5rem 0.5rem;\r\n  }\r\n  .pros>div.pros_item{\r\n    box-sizing: border-box;\r\n    width:49%;\r\n    border:0.6px solid #ccc;\r\n    padding:0.4rem 0.6rem;\r\n    margin-bottom:0.5rem;\r\n    border-radius: 0.2rem;\r\n  }\r\n  .pros_item .ptitle{\r\n    margin:0.6rem 0;\r\n  }\r\n  .pros_item p{\r\n    color:brown;\r\n    font-size: 1.2rem;\r\n    margin-bottom: 0.6rem;\r\n    text-align: left;\r\n  }\r\n  .pros_item div:first-child{\r\n    text-align: center;\r\n  }\r\n  .pros_item img{\r\n    height:134px;\r\n  }\r\n\r\n</style>\r\n"],"sourceRoot":"src\\components\\xz"}]}