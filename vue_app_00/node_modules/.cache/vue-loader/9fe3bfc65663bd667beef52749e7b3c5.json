{"remainingRequest":"D:\\Web1905\\vue2\\vueui\\day01\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Web1905\\vue2\\vueui\\day01\\vue_app_000\\vue_app_00\\src\\components\\xz\\Product.vue?vue&type=style&index=0&id=686a0765&scoped=true&lang=css","dependencies":[{"path":"D:\\Web1905\\vue2\\vueui\\day01\\vue_app_000\\vue_app_00\\src\\components\\xz\\Product.vue","mtime":1567157032040},{"path":"D:\\Web1905\\vue2\\vueui\\day01\\vue_app_000\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\Web1905\\vue2\\vueui\\day01\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"D:\\Web1905\\vue2\\vueui\\day01\\vue_app_000\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Web1905\\vue2\\vueui\\day01\\vue_app_000\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"D:\\Web1905\\vue2\\vueui\\day01\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.page_pro h2{\n  margin:0;\n  padding:1rem 0;\n  background-color: lightcoral;\n  font-weight: normal;\n}\n.pros{\n  display:flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  padding:0.6rem 0.5rem 0.5rem;\n}\n.pros>div.pros_item{\n  box-sizing: border-box;\n  width:49%;\n  border:0.6px solid #ccc;\n  padding:0.4rem 0.6rem;\n  margin-bottom:0.5rem;\n  border-radius: 0.2rem;\n}\n.pros_item .ptitle{\n  margin:0.6rem 0;\n}\n.pros_item p{\n  color:brown;\n  font-size: 1.2rem;\n  margin-bottom: 0.6rem;\n  text-align: left;\n}\n.pros_item div:first-child{\n  text-align: center;\n}\n.pros_item img{\n  height:134px;\n}\n\n",{"version":3,"sources":["Product.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Product.vue","sourceRoot":"src\\components\\xz","sourcesContent":["<template>\r\n  <div class=\"page_pro\">\r\n    <h2>商品列表</h2>\r\n    <div class=\"pros\">\r\n      <div class=\"pros_item\" v-for=\"(item,index) of products\" :key=\"index\">\r\n        <div>\r\n          <img :src=\"img_baseurl+item.img_url\" alt=\"\">\r\n        </div>\r\n        <h4 class=\"ptitle\">{{item.lname}}</h4>\r\n        <p>￥{{item.price.toFixed(2)}}</p>\r\n        <mt-button @click=\"addCart(index)\"  size=\"large\">加入购物车</mt-button>\r\n      </div>\r\n      <mt-button  @click=\"nextPage\" size=\"large\">查看更多</mt-button>\r\n        <mt-button @click=\"go_carts\">查看购物车</mt-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data(){\r\n    return {\r\n      img_baseurl:\"http://127.0.0.1:5050/\",\r\n      products:[],\r\n      pno:0\r\n    }\r\n  },\r\n  methods:{\r\n    loadMore(){\r\n      this.pno++;\r\n      (async ()=>{\r\n        var res=await this.axios.get(\"product\",{\r\n          params:{\r\n            pno:this.pno\r\n          }\r\n      });\r\n        this.products=this.products.concat(res.data.data);\r\n        console.log(this.products);\r\n      })();\r\n    },\r\n    nextPage(){\r\n      console.log(\"next\");\r\n      this.loadMore();\r\n    },\r\n    addCart(i){\r\n      (async ()=>{\r\n        var res=await this.axios.get(\"addcart\",{\r\n          params:{\r\n            lid:this.products[i].lid,\r\n            lname:this.products[i].lname,\r\n            price:this.products[i].price\r\n          }\r\n        });\r\n        console.log(res.data);\r\n        if(res.data.code==-1){\r\n          // 通常提供的组件是异步的 需要注意\r\n          this.$messagebox(\"\",\"请先登录\").then((res)=>{\r\n            this.$router.push('/Login');\r\n          }); \r\n        }else if(res.data.code==-2){\r\n          this.$messagebox(\"\",\"添加失败\");\r\n        }else{\r\n          this.$toast(res.data.msg);\r\n        }\r\n      })();\r\n    },\r\n    go_carts(){\r\n      this.$router.push('/Cart');\r\n    }\r\n  },\r\n  created() {\r\n   this.loadMore();\r\n  },\r\n}\r\n</script>\r\n\r\n<style  scoped>\r\n  .page_pro h2{\r\n    margin:0;\r\n    padding:1rem 0;\r\n    background-color: lightcoral;\r\n    font-weight: normal;\r\n  }\r\n  .pros{\r\n    display:flex;\r\n    flex-wrap: wrap;\r\n    justify-content: space-between;\r\n    padding:0.6rem 0.5rem 0.5rem;\r\n  }\r\n  .pros>div.pros_item{\r\n    box-sizing: border-box;\r\n    width:49%;\r\n    border:0.6px solid #ccc;\r\n    padding:0.4rem 0.6rem;\r\n    margin-bottom:0.5rem;\r\n    border-radius: 0.2rem;\r\n  }\r\n  .pros_item .ptitle{\r\n    margin:0.6rem 0;\r\n  }\r\n  .pros_item p{\r\n    color:brown;\r\n    font-size: 1.2rem;\r\n    margin-bottom: 0.6rem;\r\n    text-align: left;\r\n  }\r\n  .pros_item div:first-child{\r\n    text-align: center;\r\n  }\r\n  .pros_item img{\r\n    height:134px;\r\n  }\r\n\r\n</style>\r\n"]}]}